steps:
  - name: "gcr.io/google.com/cloudsdktool/cloud-sdk"
    entrypoint: gcloud
    args:
      - functions
      - deploy
      - fetchEventBlocks
      - --gen2
      - --runtime=nodejs20
      - --region=us-west2        # change if needed
      - --entry-point=fetchEventBlocks
      - --source=.
      - --trigger-http
      - --allow-unauthenticated
      - --set-secrets=AIRTABLE_TOKEN=projects/PROJECT_ID/secrets/AIRTABLE_TOKEN:latest
      - --set-env-vars=AIRTABLE_BASE_ID=app1L7NbGnRnRZ8UD,TIMEZONE=America/Los_Angeles
